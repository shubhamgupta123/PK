[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Item", 
  "modified": "2017-05-20 15:51:53.221243", 
  "name": "Item-Client", 
  "script": "frappe.ui.form.on(\"Item\", {\n\twidth_in: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.width_in >= 0) {\n\t\t\tvar width_cm = Math.round(item.width_in * 2.54 * 2)/2;\n\t\t\tfrappe.model.set_value(cdt,cdn,\"width_cm\",width_cm);\n\t\t}\nif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * item.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} else\n\t\t{\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = \t\tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\twidth_cm: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.width_cm >= 0) {\n\t\t\tvar width_in = Math.round((item.width_cm * 2 / 2.54))/2;\n\t\t\tfrappe.model.set_value(cdt,cdn,\"width_in\",width_in);\n\t\t}\nif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * item.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} else\n\t\t{\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = \t\tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\tlength_in: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.length_in >= 0) {\n\t\t\tvar length_cm = Math.round(item.length_in * 2.54 * 2)/2;\n\t\t\tfrappe.model.set_value(cdt,cdn,\"length_cm\",length_cm);\n\t\t}\nif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * item.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} else\n\t\t{\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = \t\tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\tlength_cm: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.length_cm >= 0) {\n\t\t\tvar length_in = Math.round((item.length_cm / 2.54)*2)/2;\n\t\t\tfrappe.model.set_value(cdt,cdn,\"length_in\",length_in);\n\t\t}\n\t\tif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * item.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} else\n\t\t{\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = \t\tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\tgsm: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\n\t\tif (item.gsm > 170) {\n\t\t\tvar net_weight_num = (item.width_cm * item.length_cm * \titem.gsm/100000);\t    \n\t\t\tvar net_weight = \tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t} \n\t\tif (item.gsm < 170)\n\t\t{\n\t\t\t\n\t\t\tvar net_weight_num = item.width_cm * item.length_cm * item.gsm/20000;\n\t\t\tvar net_weight = \t\tNumber(Math.round(net_weight_num+'e3')+'e-3').toFixed(1);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"net_weight\",net_weight);\n\t\t}\n\t\tif (item.gsm > 0) {\n\t\t\tvar bulk = (item.thickness / item.gsm);\t    \n\t\t\tvar bulk = Number(Math.round(bulk+'e3')+'e-3').toFixed(2);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"bulk\",bulk);\n\t\t} \n \t}\n});\n\nfrappe.ui.form.on(\"Item\", {\n\tthickness: function(frm, cdt, cdn) {\n\t\tvar item = frappe.model.get_doc(cdt, cdn);\n\t\tif (item.gsm > 0) {\n\t\t\tvar bulk = (item.thickness / item.gsm);\t    \n\t\t\tvar bulk = Number(Math.round(bulk+'e3')+'e-3').toFixed(2);\n\t\t\tfrappe.model.set_value(cdt,cdn,\"bulk\",bulk);\n\t\t} \n \t}\n});\n\ncur_frm.set_query(\"brand\", function(doc, cdt, cdn) {\n\tvar d = locals[cdt][cdn];\n\treturn {\n\t\tfilters: [\n\t\t\t[\"manufacturer\", \"=\", d.manufacturer]\n\t\t]\n\t}\n});\n", 
  "script_type": "Client"
 }
]